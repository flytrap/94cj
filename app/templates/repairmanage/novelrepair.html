{% extends 'base.html' %}
{% block content %}
<div class="layui-form layui-form-pane">
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">规则ID</label>
            <div class="layui-input-block">
                <select id="ruleid" name="规则ID" lay-verify="required">
                    <option value="">请选择</option>
                    {% for item in 规则 %}
                    <option value="{{item.v}}">{{item.t}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
    <div class="layui-form-item layui-col-md6">
        <div class="layui-inline">
            <label class="layui-form-label">ID</label>
            <div class="layui-input-block">
                <input type="text" name="ID" id="txt_Id" lay-verify="title"
                       placeholder="请输入ID" class="layui-input" value="">
            </div>
        </div>
        <div class="layui-inline">
            <button type="button" class="layui-btn layui-btn-radius layui-btn-sm" onclick="getLoadId()">&nbsp;加&nbsp;载&nbsp;</button>
        </div>
    </div>
    <div class="layui-form-item layui-col-md6">
        <div class="layui-inline">
            <label class="layui-form-label">标题</label>
            <div class="layui-input-block">
                <input type="text" name="标题" id="title" lay-verify="title"
                       placeholder="请输入标题" class="layui-input" value="">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">发布人</label>
            <div class="layui-input-block">
                <input type="text" name="发布人" id="poster" lay-verify="title"
                       placeholder="请输入发布人" class="layui-input" value="">
            </div>
        </div>
        <div class="layui-inline">
            <button type="button" class="layui-btn layui-btn-radius layui-btn-sm" onclick="getSearchTitle()">&nbsp;搜&nbsp;索&nbsp;</button>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-item layui-col-md6">
            <div class="layui-block">
                <label class="layui-form-label">来源地址</label>
                <div class="layui-input-block">
                    <!--<input type="text" name="来源地址" id="soureUrl" lay-verify="required"
                           placeholder="请输入来源地址" class="layui-input" value="{{来源地址}}">-->
                    <input type="text" name="来源地址" id="soureUrl" class="layui-input"
                           style="position:absolute;z-index:2;width:90%;" lay-verify="required" value="{{来源地址}}"
                           onkeyup="search()" autocomplete="off">
                    <select type="text" id="hc_select" lay-filter="hc_select" autocomplete="off" placeholder="移交单位全称"
                            lay-verify="required" class="layui-select" lay-search>
                        <option value="111">111</option>
                        <option value="222">222</option>
                        <option value="333">333</option>
                        <option value="444">444</option>
                        <option value="555">555</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="layui-inline">
            <button type="button" class="layui-btn layui-btn-radius layui-btn-sm" onclick="getLoadSoureUrl()"
                    style="margin-left: 16px; margin-top: 3px;">&nbsp;载&nbsp;入&nbsp;
            </button>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-item layui-col-md6">
            <div class="layui-block">
                <label class="layui-form-label">代理地址</label>
                <div class="layui-input-block">
                    <input type="text" name="代理" id="daili" lay-verify="required"
                           placeholder="请输入代理信息 如:user:password@127.0.0.1:9999" class="layui-input" value="">
                </div>
            </div>
        </div>
    </div>
</div>
<div class="layui-form layui-form-pane">
    <div class="layui-row">
        <div class="layui-col-md3">
            <div class="grid-demo">&nbsp;</div>
        </div>
        <div class="layui-col-md5">
            <div class="grid-demo">
                <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" onclick="replaceAcquisition()">
                    替换采集
                </button>
                <button type="button" class="layui-btn layui-btn-sm" onclick="replacementContent()">替换内容</button>
                <button type="button" class="layui-btn layui-btn-normal layui-btn-sm" onclick="beforeInsertion()">插入之前
                </button>
                <button type="button" class="layui-btn layui-btn-warm layui-btn-sm" onclick="afterInsertion()">插入之后
                </button>
                <button type="button" class="layui-btn layui-btn-danger layui-btn-sm" onclick="checkDuplication()">
                    检查重复
                </button>
                <button type="button" class="layui-btn layui-btn-black layui-btn-sm" onclick="saveSort()">
                    保存排序
                </button>
            </div>
        </div>
        <div class="layui-col-md2">
            <div class="grid-demo">&nbsp;</div>
        </div>
    </div>
</div>
<div class="layui-form layui-form-pane">
    <div class="layui-row">
        <div class="layui-col-md5">
            <div class="grid-demo"><h3>本站</h3></div>
        </div>
        <div class="layui-col-md2">
            <div class="grid-demo">&nbsp;</div>
        </div>
        <div class="layui-col-md5">
            <div class="grid-demo"><h3>目标站</h3></div>
        </div>
    </div>
</div>
<div class="layui-form layui-form-pane">
    <div class="layui-row">
        <div class="layui-col-md5">
            <table class="layui-hide" id="ben"></table>
        </div>
        <div class="layui-col-md1">
            <div class="grid-demo"><p>&nbsp;</p>
                <p style="text-align:center;color:red;">左右一对一</p></div>
        </div>
        <div class="layui-col-md6">
            <table class="layui-hide" id="yuan"></table>
        </div>
    </div>
</div>
<script>
    layui.use(['form', 'jquery', 'table'], function () {
        var $ = layui.jquery, form = layui.form, table = layui.table;
        form.on('select(hc_select)', function (data) {   //选择移交单位 赋值给input框
 				  var select_text = data.elem[data.elem.selectedIndex].text;
                $("#soureUrl").val(select_text );
                $("#hc_select").next().find("dl").css({ "display": "none" });
                form.render();
            });
        //本站列表初始化
        table.render({
            elem: '#ben'
            , data: []
            , cols: [[
                {type: 'checkbox'}
                , {field: '章节ID', width: 80, title: 'ID'}
                , {field: '小说名称', width: 180, title: '一级标题'}
                , {field: '章节名称', width: 300, title: '二级标题'}
                , {field: '顺序', title: '顺序', edit: 'text', sort: true}
            ]]
            , page: false
        });
        //源站列表初始化
        table.render({
            elem: '#yuan'
            , data: []
            , cols: [[
                {type: 'checkbox'}
                , {field: '标题', width: 300, title: '二级标题'}
                , {field: '索引', width:100,title: '顺序', sort: true}
                , {field: '地址', title: '地址'}
            ]]
            , page: false
        });
        getLoadId=function(){
            var aid = $("#txt_Id").val();
            if(aid===''){
                layer.alert('请输入ID！');
            }
            table.reload('ben', {
              url: '/getLoadId?aid='+aid
            });
        }
        getLoadSoureUrl=function(){
            var ruleid = $("#ruleid").val();
            if(ruleid===''){
                layer.alert('请选择规则！');
                return false;
            }
            var soureUrl = $("#soureUrl").val();
            if(soureUrl===''){
                layer.alert('请输入源地址！');
                return false;
            }
            var daili = $("#daili").val();
            table.reload('yuan', {
              url: '/getLoadSoureUrl',
              where: {
                    规则ID:ruleid,
                    源地址:soureUrl,
                    代理:daili
              }
            });
        }
        getJson=function(type){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        replaceAcquisition=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        replacementContent=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        beforeInsertion=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        afterInsertion=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        checkDuplication=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        saveSort=function(){
            layer.alert('当前版本无法使用此功能,请升级！');
            return false;
        }
        //导航
        $(document).ready(function () {
            var url = GetUrlRelativePath();
            var patt1 = new RegExp(url);
            //$(".layui-this").removeClass();
            $(document.body).find('a').each(function (i, obj) {
                var str = $(obj).attr('href');
                if (patt1.test(str)) {
                    $(obj).parent().addClass("layui-this");
                    $(obj).parent().parent().parent().addClass(" layui-nav-itemed");
                }
            });
        });
    });


</script>
{% endblock %}